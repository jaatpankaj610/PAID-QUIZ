<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üåü ‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® GK ‡§´‡•ç‡§∞‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º üåü</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&family=Noto+Serif+Devanagari:wght@400;700;900&display=swap');

        :root {
            --primary: #ff0066;
            --secondary: #00ccff;
            --success: #00b894;
            --danger: #d63031;
            --warning: #fdcb6e;
            --light: #ffffff;
            --dark: #000000;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --offline-gradient: linear-gradient(135deg, #6b7280, #4b5563);
            --error-gradient: linear-gradient(135deg, #ff4d4d, #ff1a1a);
            --premium-gradient: linear-gradient(135deg, #ffcc00, #ff9900);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Noto Serif Devanagari', 'Poppins', sans-serif; }
        body { background: var(--gradient); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 0; overflow-x: hidden; position: fixed; width: 100%; height: 100vh; top: 0; left: 0; touch-action: pan-y; }
        .container { width: 100%; max-width: 600px; height: 100vh; background: var(--light); border-radius: 0; box-shadow: 0 20px 40px rgba(0,0,0,0.3); overflow: hidden; display: flex; flex-direction: column; position: relative; }
        .scrollable-content { flex: 1; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; }
        .header { background: var(--gradient); padding: 40px 20px; text-align: center; color: var(--light); position: relative; overflow: hidden; animation: headerGlow 3s ease-in-out infinite alternate; }
        @keyframes headerGlow { 0% { box-shadow: 0 0 20px rgba(255,0,102,0.5); } 100% { box-shadow: 0 0 40px rgba(0,204,255,0.7); } }
        .header h1 { font-size: 44px; font-weight: 900; margin-bottom: 12px; color: var(--light); }
        .header p { font-size: 24px; font-weight: 900; color: var(--light); letter-spacing: 0.5px; }
        .content { padding: 30px; padding-bottom: 40px; }
        .quiz-info { background: var(--light); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); text-align: center; border: 2px solid var(--primary); animation: fadeIn 1s ease-in; }
        @keyframes fadeIn { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
        .quiz-info h2 { font-size: 34px; font-weight: 900; color: var(--dark); margin-bottom: 15px; }
        .quiz-info p { font-size: 22px; font-weight: 900; color: var(--dark); }
        .features { list-style: none; margin-bottom: 30px; }
        .features li { margin-bottom: 15px; display: flex; align-items: center; font-size: 24px; font-weight: 900; color: var(--dark); animation: slideIn 0.5s ease-in-out; }
        @keyframes slideIn { 0% { opacity: 0; transform: translateX(-20px); } 100% { opacity: 1; transform: translateX(0); } }
        .features li i { margin-right: 15px; color: var(--success); font-size: 30px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .start-btn { background: var(--gradient); color: var(--light); border: none; border-radius: 50px; padding: 20px 35px; font-size: 24px; font-weight: 900; cursor: pointer; width: 100%; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(255,0,102,0.4); }
        .start-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(255,0,102,0.5); background: linear-gradient(135deg, #00ccff, #ff0066); }
        .premium-btn { background: var(--premium-gradient); color: var(--dark); border: none; border-radius: 50px; padding: 15px 30px; font-size: 24px; font-weight: 900; cursor: pointer; width: 100%; margin-top: 15px; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(255,204,0,0.4); }
        .premium-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(255,204,0,0.5); background: linear-gradient(135deg, #ff9900, #ffcc00); }
        .quiz-section { display: none; background: var(--light); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); border: 2px solid var(--primary); }
        .question { font-size: 26px; font-weight: 900; color: var(--dark); margin-bottom: 25px; }
        .options { list-style: none; }
        .options li { background: #e6e6fa; padding: 18px; margin-bottom: 12px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; font-size: 24px; font-weight: 900; color: var(--dark); border: 1px solid rgba(255,0,102,0.2); }
        .options li:hover { background: rgba(255,0,102,0.15); transform: translateX(5px); }
        .options li.correct { background: rgba(0,184,148,0.2); border: 2px solid var(--success); animation: correctAnswer 0.5s ease; }
        .options li.incorrect { background: rgba(214,48,49,0.2); border: 2px solid var(--danger); animation: incorrectAnswer 0.5s ease; }
        @keyframes correctAnswer { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes incorrectAnswer { 0% { transform: translateX(10px); } 50% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
        .result { margin-top: 25px; font-size: 24px; font-weight: 900; color: var(--dark); text-align: center; display: none; }
        .result.success { color: var(--success); animation: fadeIn 0.5s ease; }
        .result.error { color: var(--danger); animation: fadeIn 0.5s ease; }
        .next-btn { background: var(--gradient); color: var(--light); border: none; border-radius: 50px; padding: 18px; font-size: 24px; font-weight: 900; cursor: pointer; width: 100%; margin-top: 20px; display: none; box-shadow: 0 5px 15px rgba(255,0,102,0.4); }
        .next-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255,0,102,0.5); }
        .offline-section, .error-section { text-align: center; padding: 30px; background: var(--light); border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); margin: 30px 0; border: 2px solid var(--primary); }
        .custom-design { width: 220px; height: 220px; margin: 0 auto 20px; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--light); font-size: 30px; font-weight: 900; text-align: center; line-height: 1.3; animation: pulse 2s infinite; }
        .offline-section .custom-design { background: var(--offline-gradient); }
        .error-section .custom-design { background: var(--error-gradient); }
        .offline-message, .error-message { font-size: 26px; font-weight: 900; color: var(--dark); }
        @media (max-width: 600px) { .header h1 { font-size: 38px; } .header p { font-size: 22px; } .start-btn, .premium-btn { font-size: 22px; padding: 16px 30px; } .custom-design { font-size: 28px; width: 180px; height: 180px; } .question { font-size: 24px; } .options li { font-size: 22px; } .quiz-info h2 { font-size: 32px; } .quiz-info p { font-size: 20px; } .features li { font-size: 22px; } .result { font-size: 22px; } .next-btn { font-size: 22px; } .offline-message, .error-message { font-size: 24px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-crown"></i> ‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® GK ‡§´‡•ç‡§∞‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º üåü</h1>
            <p>‡§Ö‡§™‡§®‡•á ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•ã ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§Ö‡§®‡§≤‡•â‡§ï ‡§ï‡§∞‡•á‡§Ç!</p>
        </div>
        <div class="scrollable-content">
            <div class="content">
                <div id="offline-section" class="offline-section" style="display: none;">
                    <div class="custom-design">üì¥ Rajasthan GK Quiz üåü<br>Offline</div>
                    <p class="offline-message">‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                </div>
                <div id="error-section" class="error-section" style="display: none;">
                    <div class="custom-design">‚ö†Ô∏è Rajasthan GK Quiz üåü<br>Error</div>
                    <p class="error-message">‡§ï‡•Å‡§õ ‡§ó‡§°‡§º‡§¨‡§°‡§º ‡§π‡•Å‡§à, ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                </div>
                <div id="online-content">
                    <div class="quiz-info">
                        <h2><i class="fas fa-star"></i> ‡§´‡•ç‡§∞‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º</h2>
                        <p>‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® GK ‡§ï‡•á ‡§∏‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç!</p>
                        <ul class="features">
                            <li><i class="fas fa-check-circle"></i> ‡§Æ‡•Å‡§´‡•ç‡§§ 10+ ‡§∏‡§µ‡§æ‡§≤</li>
                            <li><i class="fas fa-check-circle"></i> ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</li>
                            <li><i class="fas fa-check-circle"></i> ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤-‡§°‡•á‡§∏‡•ç‡§ï‡§ü‡•â‡§™ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü</li>
                            <li><i class="fas fa-check-circle"></i> ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü</li>
                        </ul>
                        <button class="start-btn" onclick="startQuiz()">‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç üöÄ</button>
                        <button class="premium-btn" onclick="goToPremium()">‡§™‡•á‡§° ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Å <i class="fas fa-crown"></i></button>
                    </div>
                    <div id="quiz-section" class="quiz-section">
                        <div class="question" id="question-text"></div>
                        <ul class="options" id="options-list"></ul>
                        <div id="result" class="result"></div>
                        <button class="next-btn" onclick="nextQuestion()">‡§Ö‡§ó‡§≤‡§æ ‡§∏‡§µ‡§æ‡§≤</button>
                        <button class="premium-btn" onclick="goToPremium()">‡§™‡•á‡§° ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§Ö‡§®‡§≤‡•â‡§ï ‡§ï‡§∞‡•á‡§Ç <i class="fas fa-crown"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        document.addEventListener('DOMContentLoaded', () => {
            initializeQuiz();
            if (navigator.onLine) {
                loadQuestions();
            }
        });

        function initializeQuiz() {
            checkNetworkStatus();
            console.log('DOM loaded, initializing quiz');
        }

        function checkNetworkStatus() {
            const offlineSection = document.getElementById('offline-section');
            const errorSection = document.getElementById('error-section');
            const onlineContent = document.getElementById('online-content');
            if (!offlineSection || !errorSection || !onlineContent) {
                console.error('Network status elements not found');
                return;
            }
            if (!navigator.onLine) {
                offlineSection.style.display = 'block';
                errorSection.style.display = 'none';
                onlineContent.style.display = 'none';
            } else {
                offlineSection.style.display = 'none';
                errorSection.style.display = 'none';
                onlineContent.style.display = 'block';
            }
        }

        async function loadQuestions() {
            const errorSection = document.getElementById('error-section');
            const onlineContent = document.getElementById('online-content');
            if (!errorSection || !onlineContent) {
                console.error('Error/Online sections not found');
                return;
            }
            try {
                const response = await fetch('https://jaatpankaj610.github.io/PAID-QUIZ/freequestions.json', {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-store',
                    credentials: 'omit'
                });
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                questions = await response.json();
                console.log('Questions loaded:', questions);
                if (!Array.isArray(questions) || questions.length === 0) throw new Error('No questions found');
            } catch (error) {
                console.error('Failed to load questions:', error);
                errorSection.style.display = 'block';
                onlineContent.style.display = 'none';
                if ('vibrate' in navigator) navigator.vibrate(200);
            }
        }

        function startQuiz() {
            if (!navigator.onLine) {
                document.getElementById('offline-section').style.display = 'block';
                return;
            }
            if (questions.length === 0) {
                loadQuestions().then(() => {
                    if (questions.length > 0) {
                        const quizInfo = document.querySelector('.quiz-info');
                        const quizSection = document.getElementById('quiz-section');
                        if (quizInfo && quizSection) {
                            quizInfo.style.display = 'none';
                            quizSection.style.display = 'block';
                            currentQuestionIndex = 0;
                            score = 0;
                            showQuestion();
                        } else {
                            console.error('Quiz info or section not found');
                        }
                    }
                });
            } else {
                const quizInfo = document.querySelector('.quiz-info');
                const quizSection = document.getElementById('quiz-section');
                if (quizInfo && quizSection) {
                    quizInfo.style.display = 'none';
                    quizSection.style.display = 'block';
                    currentQuestionIndex = 0;
                    score = 0;
                    showQuestion();
                } else {
                    console.error('Quiz info or section not found');
                }
            }
        }

        function showQuestion() {
            const questionText = document.getElementById('question-text');
            const optionsList = document.getElementById('options-list');
            const result = document.getElementById('result');
            const nextBtn = document.getElementById('next-btn');
            if (!questionText || !optionsList || !result || !nextBtn) {
                console.error('Quiz elements not found:', { questionText, optionsList, result, nextBtn });
                return;
            }

            if (currentQuestionIndex >= questions.length) {
                questionText.textContent = '‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!';
                optionsList.innerHTML = '';
                result.textContent = `‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞: ${score}/${questions.length}`;
                result.className = 'result success';
                result.style.display = 'block';
                nextBtn.style.display = 'none';
                return;
            }

            const question = questions[currentQuestionIndex];
            if (!question || !question.question || !question.options || !Array.isArray(question.options) || question.options.length < 4) {
                questionText.textContent = '‡§∏‡§µ‡§æ‡§≤ ‡§Ø‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§è!';
                optionsList.innerHTML = '';
                console.error('Invalid question data:', question);
                return;
            }

            questionText.textContent = question.question;
            optionsList.innerHTML = '';
            result.style.display = 'none';
            nextBtn.style.display = 'none';

            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.textContent = option || '‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ó‡§æ‡§Ø‡§¨';
                li.onclick = () => checkAnswer(index);
                optionsList.appendChild(li);
            });
        }

        function checkAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.options li');
            const result = document.getElementById('result');
            const nextBtn = document.getElementById('next-btn');
            if (!result || !nextBtn || !options.length) {
                console.error('Result or options not found');
                return;
            }

            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correctAnswer) option.classList.add('correct');
                if (index === selectedIndex && selectedIndex !== question.correctAnswer) option.classList.add('incorrect');
            });

            if (selectedIndex === question.correctAnswer) {
                score++;
                result.textContent = '‡§∏‡§π‡•Ä ‡§ú‡§µ‡§æ‡§¨! üéâ';
                result.className = 'result success';
            } else {
                result.textContent = `‡§ó‡§≤‡§§ ‡§ú‡§µ‡§æ‡§¨! ‡§∏‡§π‡•Ä: ${question.options[question.correctAnswer]}`;
                result.className = 'result error';
            }
            result.style.display = 'block';
            nextBtn.style.display = 'block';
            if ('vibrate' in navigator) navigator.vibrate(200);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        window.onerror = function(message) {
            console.error('Global error:', message);
            const errorSection = document.getElementById('error-section');
            const onlineContent = document.getElementById('online-content');
            if (errorSection && onlineContent) {
                errorSection.style.display = 'block';
                onlineContent.style.display = 'none';
                if ('vibrate' in navigator) navigator.vibrate(200);
            }
            return true;
        };

        window.addEventListener('online', checkNetworkStatus);
        window.addEventListener('offline', checkNetworkStatus);

        function goToPremium() {
            window.location.href = 'https://jaatpankaj610.github.io/PAID-QUIZ/index.html';
        }
    </script>
</body>
</html>
